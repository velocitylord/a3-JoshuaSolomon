<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Gino Hills Barbershop Login Page</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tomorrow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
  
</head>
<body class='min-h-dvh font-["Tomorrow",sans-serif]'>

  <div class="fixed inset-0 -z-35 bg-gradient-to-l from-orange-600 via-orange-300 to-black"></div> <!--gradient background--> 

  <img
    src="/img/hairclippers.jpg"   
    alt="Image of hair clipper tools"
    aria-hidden="true"
    class="fixed inset-0 -z-25 w-full h-full object-cover opacity-30"
    loading="lazy" decoding="async"
  />

  <div class="fixed inset-0 -z-10 bg-orange-500/35 mix-blend-multiply"></div>

  <section class="min-h-dvh flex items-center justify-center px-4"> <!--center--> 
   
    <div class="bg-white w-full max-w-3xl rounded-2xl shadow p-6 md:p-10 scale-up-ver-top-normal"> <!--sign up/in box--> 
      <h1 class="text-xl font-bold text-black-900">Sign in or create new account</h1>
      <p class="text-sm text-gray-600 mt-1">Enter username or email</p>

      <form id="loginForm" class="mt-8 md:mt-10">
        
        <div class="relative flex items-center text-lg mb-6 md:mb-8"> <!--username box & icon--> 
        <svg
            class="absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-600"
            viewBox="0 0 24 24" aria-hidden="true"
            fill="none" stroke="currentColor" stroke-width="1.5"
        >
            <path stroke-linecap="round" stroke-linejoin="round"
            d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
        </svg>

        <input
            id="username" name="username" placeholder="Username" required
            class="bg-gray-200 w-full rounded-xl pl-12 py-2 md:py-4 focus:outline-none"
        />
        </div>

        <div class="relative flex items-center text-lg mb-6 md:mb-8"> <!--password box & icon--> 
        <svg
            class="absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-600"
            viewBox="0 0 24 24" aria-hidden="true"
            fill="none" stroke="currentColor" stroke-width="1.5"
        >
            <path stroke-linecap="round" stroke-linejoin="round"
            d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" />
        </svg>

        <input
            id="password" name="password" type="password" placeholder="Password" required
            class="bg-gray-200 w-full rounded-xl pl-12 py-2 md:py-4 focus:outline-none"
        />
        </div>

        <button
          type="submit"
          class="w-full rounded-xl text-white font-medium uppercase p-3 md:p-4
                 bg-gradient-to-b from-gray-700 to-gray-900 scale-up-center-normal"
        >
          Login
        </button>

        <div id="msg" class="mt-3 text-sm text-red-600 min-h-5"></div> <!--feedback reply--> 
      </form>
    </div>
  </section>

  <script>
    const form = document.getElementById('loginForm');
    const msg  = document.getElementById('msg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msg.textContent = 'Logging into account...';
      const data = Object.fromEntries(new FormData(form).entries());
      const r = await fetch('/auth/login', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ username: (data.username||'').trim(), password: data.password })
      });
      const json = await r.json().catch(()=>({}));
      if(!r.ok){ msg.textContent = json.error || 'Login failed'; return; }
      window.location = '/index.html';
    });
  </script>
</body>
</html>
